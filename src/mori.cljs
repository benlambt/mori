(ns mori
  (:require-macros
   [mori.macros :refer [mori-export property-export]])
  (:refer-clojure :exclude
   [count empty conj find nth assoc dissoc disj pop peek get
    empty? reverse into merge subvec keys vals
    equiv sort sort-by
    vector vec array-map hash-map set compare]))

(mori-export count cljs.core/count)
(mori-export empty cljs.core/empty)
(mori-export conj cljs.core/conj)
(mori-export find cljs.core/find)
(mori-export nth cljs.core/nth)
(mori-export assoc cljs.core/assoc)
(mori-export dissoc cljs.core/dissoc)
(mori-export disj cljs.core/disj)
(mori-export pop cljs.core/pop)
(mori-export peek cljs.core/peek)
(mori-export get cljs.core/get)
(mori-export isEmpty cljs.core/empty?)
(mori-export reverse cljs.core/reverse)
(mori-export into cljs.core/into)
(mori-export merge cljs.core/merge)
(mori-export subvec cljs.core/subvec)
(mori-export keys cljs.core/keys)
(mori-export vals cljs.core/vals)
(mori-export equiv cljs.core/==)
(mori-export sort cljs.core/sort)
(mori-export sortBy cljs.core/sort-by)
(mori-export vector cljs.core/vector)
(mori-export vec cljs.core/vec)
(mori-export Vector cljs.core/PersistentVector)

(property-export "Vector.prototype.nth" cljs.core/nth)
(property-export "Vector.prototype.peek" cljs.core/peek)
(property-export "Vector.prototype.pop" cljs.core/pop)
(property-export "Vector.prototype.conj" cljs.core/conj)
(property-export "Vector.prototype.equiv" cljs.core/==)
(property-export "Vector.prototype.empty" cljs.core/empty)
(property-export "Vector.prototype.count" cljs.core/count)
(property-export "Vector.prototype.get" cljs.core/get)
(property-export "Vector.prototype.key" cljs.core/key)
(property-export "Vector.prototype.val" cljs.core/val)
(property-export "Vector.prototype.assoc" cljs.core/assoc)
(property-export "Vector.prototype.reduce" (fn [coll f init] (cljs.core/reduce f init coll)))
(property-export "Vector.prototype.kvReduce" (fn [coll f init] (cljs.core/reduce-kv f init coll)))
(property-export "Vector.prototype.asTransient" cljs.core/transient)

(mori-export hashMap cljs.core/array-map)
(mori-export ArrayMap cljs.core/PersistentArrayMap)
(property-export "ArrayMap.prototype.conj" cljs.core/conj)
(property-export "ArrayMap.prototype.empty" cljs.core/empty)
(property-export "ArrayMap.prototype.count" cljs.core/count)
(property-export "ArrayMap.prototype.assoc" cljs.core/assoc)
(property-export "ArrayMap.prototype.dissoc" cljs.core/dissoc)
(property-export "ArrayMap.prototype.reduce" (fn [coll f init] (cljs.core/reduce f init coll)))
(property-export "ArrayMap.prototype.kvReduce" (fn [coll f init] (cljs.core/reduce-kv f init coll)))
(property-export "ArrayMap.prototype.asTransient" cljs.core/transient)

(goog/exportSymbol "mori.ArrayMap.prototype.get" (.. cljs.core/PersistentArrayMap -prototype -get))
(goog/exportSymbol "mori.ArrayMap.prototype.has" (.. cljs.core/PersistentArrayMap -prototype -has))
(goog/exportSymbol "mori.ArrayMap.prototype.equiv" (.. cljs.core/PersistentArrayMap -prototype -equiv))
(goog/exportSymbol "mori.ArrayMap.prototype.keys" (.. cljs.core/PersistentArrayMap -prototype -keys))
(goog/exportSymbol "mori.ArrayMap.prototype.entries" (.. cljs.core/PersistentArrayMap -prototype -entries))
(goog/exportSymbol "mori.ArrayMap.prototype.values" (.. cljs.core/PersistentArrayMap -prototype -values))
(goog/exportSymbol "mori.ArrayMap.prototype.forEach" (.. cljs.core/PersistentArrayMap -prototype -forEach))

(defn ^:export arrayMapFromArray [arr no-clone no-check]
  (cljs.core/PersistentArrayMap.fromArray arr no-clone no-check))

(defn ^:export arrayMapUnwrap [m]
  (if (instance? cljs.core/PersistentArrayMap m)
    (.-arr m)
    (throw (js/Error. "Can only unwrap array maps"))))

(mori-export Map cljs.core/PersistentHashMap)
(property-export "Map.prototype.conj" cljs.core/conj)
(property-export "Map.prototype.empty" cljs.core/empty)
(property-export "Map.prototype.count" cljs.core/count)
(property-export "Map.prototype.key" cljs.core/key)
(property-export "Map.prototype.val" cljs.core/val)
(property-export "Map.prototype.assoc" cljs.core/assoc)
(property-export "Map.prototype.dissoc" cljs.core/dissoc)
(property-export "Map.prototype.reduce" (fn [coll f init] (cljs.core/reduce f init coll)))
(property-export "Map.prototype.kvReduce" (fn [coll f init] (cljs.core/reduce-kv f init coll)))
(property-export "Map.prototype.asTransient" cljs.core/transient)


(goog/exportSymbol "mori.Map.prototype.get" (.. cljs.core/PersistentHashMap -prototype -get))
(goog/exportSymbol "mori.Map.prototype.has" (.. cljs.core/PersistentHashMap -prototype -has))
(goog/exportSymbol "mori.Map.prototype.equiv" (.. cljs.core/PersistentHashMap -prototype -equiv))
(goog/exportSymbol "mori.Map.prototype.keys" (.. cljs.core/PersistentHashMap -prototype -keys))
(goog/exportSymbol "mori.Map.prototype.entries" (.. cljs.core/PersistentHashMap -prototype -entries))
(goog/exportSymbol "mori.Map.prototype.values" (.. cljs.core/PersistentHashMap -prototype -values))
(goog/exportSymbol "mori.Map.prototype.forEach" (.. cljs.core/PersistentHashMap -prototype -forEach))

(mori-export set cljs.core/set)
(mori-export Set cljs.core/PersistentHashSet)
(property-export "Set.prototype.get" cljs.core/get)
(property-export "Set.prototype.conj" cljs.core/conj)
(property-export "Set.prototype.empty" cljs.core/empty)
(property-export "Set.prototype.count" cljs.core/count)
(property-export "Set.prototype.key" cljs.core/key)
(property-export "Set.prototype.val" cljs.core/val)
(property-export "Set.prototype.contains" cljs.core/contains?)
(property-export "Set.prototype.disjoin" cljs.core/disj)


(goog/exportSymbol "mori.Set.prototype.has" (.. cljs.core/PersistentHashSet -prototype -has))
(goog/exportSymbol "mori.Set.prototype.equiv" (.. cljs.core/PersistentHashSet -prototype -equiv))
(goog/exportSymbol "mori.Set.prototype.keys" (.. cljs.core/PersistentHashSet -prototype -keys))
(goog/exportSymbol "mori.Set.prototype.entries" (.. cljs.core/PersistentHashSet -prototype -entries))
(goog/exportSymbol "mori.Set.prototype.values" (.. cljs.core/PersistentHashSet -prototype -values))
(goog/exportSymbol "mori.Set.prototype.forEach" (.. cljs.core/PersistentHashSet -prototype -forEach))

(mori-export compare cljs.core/compare)
